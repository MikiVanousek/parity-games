<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Graph Visualizer</title>
  <script src="https://kit.fontawesome.com/a4ee9b505a.js" crossorigin="anonymous"></script>
</head>

<body>
  <div id="cy"></div>
  <div id="custom-context-menu" class="custom-context-menu">
    <ul>
      <li id="edit-priority">Edit Priority</li>
    </ul>
  </div>
  <div class="navbar">
    <div class="navbar-heading">Parity Game</div>
    <div class="navbar-group">
      <span id="file-name-display"></span>
      <input type="file" id="file-input" hidden onchange="handleFileSelect(event)" />
      <label class="button" for="file-input"><span class="icon"><i class="fa-solid fa-upload"></span></i>Upload File
        (without view)</label>
      <div class="row">
        <input type="file" id="board-file-input" hidden onchange="handleImportGame(event)" />
        <label class="button" for="board-file-input"><span class="icon"><i
              class="fa-solid fa-file-import"></i></span>Import</label>
        <button onclick="handleExportGame()"><span class="icon"><i
              class="fa-solid fa-file-export"></i></span>Export</button>
      </div>
      <button id="export-png-button" onclick="exportAsPng()"><span class="icon"><i
            class="fa-solid fa-image"></i></span>Export as PNG</button>
    </div>
    <div class="navbar-group">
      <div class="navbar-group-heading">Layouts Setting</div>
      <div class="row">
        <select class="button" id="layout-select" onchange="changeLayout(event)">
        </select>
        <button id="layout-run-button" onclick="runLayout()"><i class="fa-solid fa-play"></i></button>
      </div>
      <div class="checkbox-wrapper">
        <input id="layout-on-drag" type="checkbox" class="switch">
        <label for="layout-on-drag">Layout on Drag</label>
      </div>
      <div class="checkbox-wrapper">
        <input id="display-labels" type="checkbox" class="switch">
        <label for="display-labels">Display labels</label>
      </div>

      <div class="navbar-group-heading">Trace settings</div>
      <div class="navbar-group-heading" id="trace_settings">
        Trace settings
        <input type="file" id="fileInput" style="display: none;" class="button">
        <span class="icon">
          <i class="fa-solid fa-file-import"></i>
        </span>
        Import
      </div>

    </div>
  </div>
  </div>

  <div class="bottom-bar">
    <button onclick="skipToBeginningAction()"><span class="icon"><i
          class="fa-solid fa-backward-fast"></i></span></button>
    <button onclick="lastStepAction()"><span class="icon"><i class="fa-solid fa-backward-step"></i></span></button>

    <div class="play-speed-container">
      <button onclick="playAction()"><span class="icon"><i class="fa-solid fa-play"></i></span>Play</button>
      <select id="speedSelect" onchange="setSpeed(this.value)">
        <option value="1.0">1.0x</option>
        <option value="1.2">1.2x</option>
        <option value="1.5">1.5x</option>
        <option value="2.0">2.0x</option>
      </select>
    </div>
    <button onclick="pauseAction()"><span class="icon"><i class="fa-solid fa-pause"></i></span></button>
    <button onclick="nextStepAction()"><span class="icon"><i class="fa-solid fa-forward-step"></i></span></button>
    <button onclick="skipToEndAction()"><span class="icon"><i class="fa-solid fa-forward-fast"></i></span></button>
  </div>

  <script src="main.js"></script>
  <script>
    function toggleSpeedDropdown(event) {
      document.getElementById("speedDropdown").style.display = 'block';
      event.stopPropagation(); // Prevent the click from being immediately caught by document
    }

    // Function to set speed and hide dropdown
    function setSpeed(speed) {
      console.log("Speed set to:", speed);
      // Implement speed change logic here
      document.getElementById("speedDropdown").style.display = 'none';
    }

    // Clicking outside the dropdown hides it
    document.addEventListener('click', function (event) {
      var speedDropdown = document.getElementById("speedDropdown");
      if (speedDropdown.style.display === 'block') {
        speedDropdown.style.display = 'none';
      }
    });

  </script>

  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #1d1d1d;
      color: white;
      font-size: 14px;
    }

    .icon {
      margin-right: 0.5rem;
    }

    .row {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      gap: 10px;
      width: 100%;
    }

    #cy {
      position: absolute;
      left: 0;
      top: 0;
      width: 80%;
      height: 100%;
      background: #1d1d1d;
    }

    .navbar {
      position: absolute;
      right: 0;
      top: 50%;
      /* Start at the middle of the page */
      transform: translateY(-50%) translateX(-40px);
      /* Move it up by half its own height */
      width: 240px;
      /* Complementing the width of #cy */
      background-color: #333;
      padding: 1.5rem;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-radius: 20px;
    }

    .navbar-heading {
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
      text-align: center;
    }

    .navbar-group {
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      justify-content: space-around;
      height: 100%;
      width: 100%;
      margin-top: 20px;
    }

    .navbar-group-heading {
      font-size: 0.8rem;
      color: white;
      text-align: center;
    }

    .checkbox-wrapper {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    @supports (-webkit-appearance: none) or (-moz-appearance: none) {
      .checkbox-wrapper input[type=checkbox] {
        --active: #808080;
        --active-inner: #fff;
        --focus: 2px rgba(39, 94, 254, .3);
        --border: white;
        --border-hover: white;
        --background: #333;
        --disabled: #1D1D1D;
        --disabled-inner: #333;
        -webkit-appearance: none;
        -moz-appearance: none;
        height: 15px;
        outline: none;
        display: inline-block;
        vertical-align: top;
        position: relative;
        margin: 0;
        cursor: pointer;
        border: 1px solid var(--bc, var(--border));
        background: var(--b, var(--background));
        transition: background 0.3s, border-color 0.3s, box-shadow 0.2s;
      }

      .checkbox-wrapper input[type=checkbox]:after {
        content: "";
        display: block;
        left: 0;
        top: 0;
        position: absolute;
        transition: transform var(--d-t, 0.3s) var(--d-t-e, ease), opacity var(--d-o, 0.2s);
      }

      .checkbox-wrapper input[type=checkbox]:checked {
        --b: var(--active);
        --bc: var(--active);
        --d-o: .3s;
        --d-t: .6s;
        --d-t-e: cubic-bezier(.2, .85, .32, 1.2);
      }

      .checkbox-wrapper input[type=checkbox]:disabled {
        --b: var(--disabled);
        cursor: not-allowed;
        opacity: 0.9;
      }

      .checkbox-wrapper input[type=checkbox]:disabled:checked {
        --b: var(--disabled-inner);
        --bc: var(--border);
      }

      .checkbox-wrapper input[type=checkbox]:disabled+label {
        cursor: not-allowed;
      }

      .checkbox-wrapper input[type=checkbox]:hover:not(:checked):not(:disabled) {
        --bc: var(--border-hover);
      }

      .checkbox-wrapper input[type=checkbox]:focus {
        box-shadow: 0 0 0 var(--focus);
      }

      .checkbox-wrapper input[type=checkbox]:not(.switch) {
        width: 21px;
      }

      .checkbox-wrapper input[type=checkbox]:not(.switch):after {
        opacity: var(--o, 0);
      }

      .checkbox-wrapper input[type=checkbox]:not(.switch):checked {
        --o: 1;
      }

      .checkbox-wrapper input[type=checkbox]+label {
        display: inline-block;
        vertical-align: middle;
        cursor: pointer;
        margin-left: 4px;
      }

      .checkbox-wrapper input[type=checkbox]:not(.switch) {
        border-radius: 7px;
      }

      .checkbox-wrapper input[type=checkbox]:not(.switch):after {
        width: 5px;
        height: 9px;
        border: 2px solid var(--active-inner);
        border-top: 0;
        border-left: 0;
        left: 7px;
        top: 4px;
        transform: rotate(var(--r, 20deg));
      }

      .checkbox-wrapper input[type=checkbox]:not(.switch):checked {
        --r: 43deg;
      }

      .checkbox-wrapper input[type=checkbox].switch {
        width: 30px;
        border-radius: 11px;
      }

      .checkbox-wrapper input[type=checkbox].switch:after {
        left: 2px;
        top: 2.1px;
        border-radius: 50%;
        width: 11px;
        height: 11px;
        background: var(--ab, var(--border));
        transform: translateX(var(--x, 0));
      }

      .checkbox-wrapper input[type=checkbox].switch:checked {
        --ab: var(--active-inner);
        --x: 14px;
      }

      .checkbox-wrapper input[type=checkbox].switch:disabled:not(:checked):after {
        opacity: 0.6;
      }
    }

    .checkbox-wrapper * {
      box-sizing: inherit;
    }

    .checkbox-wrapper *:before,
    .checkbox-wrapper *:after {
      box-sizing: inherit;
    }

    .navbar-group button,
    .navbar-group .button {
      text-align: center;
      background-color: #1d1d1d;
      border-radius: 10px;
      color: white;
      padding: 0.7rem 1.3rem;
      border: none;
      cursor: pointer;
      box-shadow: rgba(0, 0, 0, 0.2) 0px 8px 24px;
      font-size: 12px;
    }

    .navbar-group button:hover,
    .navbar-group .button:hover {
      opacity: 0.7;
    }

    #file-name-display {
      font-size: 12px;
      color: white;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }

    #layout-select {
      width: 100%;
      padding: 0.7rem 1rem;
      border-radius: 10px;
      text-align: center;
      border: none;
      background-color: #1d1d1d;
      color: white;
      font-size: 12px;
      cursor: pointer;
    }

    .custom-context-menu {
      position: absolute;
      z-index: 1000;
      width: 200px;
      background: rgb(38, 38, 38);
      border-radius: 5px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, .2);
      display: none;
    }

    .custom-context-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .custom-context-menu ul li {
      padding: 8px;
      cursor: pointer;
    }

    .custom-context-menu ul li:hover {
      background-color: #584d4d;
    }

    .bottom-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: #333;
      padding: 1rem;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      gap: 20px;
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
    }

    .bottom-bar button {
      background-color: #1d1d1d;
      border-radius: 10px;
      color: white;
      padding: 0.7rem 1.3rem;
      border: none;
      cursor: pointer;
      box-shadow: rgba(0, 0, 0, 0.2) 0px 8px 24px;
      font-size: 12px;
    }

    .bottom-bar button:hover {
      opacity: 0.7;
    }

    .play-speed-container {
      position: relative;
      display: inline-block;
    }

    .speed-dropdown {
      display: none;
      /* Initially hidden */
      position: absolute;
      background-color: #f9f9f9;
      min-width: 100px;
      /* Adjust as necessary */
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1;
    }

    .speed-dropdown ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    .speed-dropdown ul li {
      color: black;
      padding: 8px 12px;
      cursor: pointer;
      text-align: left;
      /* Adjust alignment as needed */
    }

    .speed-dropdown ul li:hover {
      background-color: #ddd;
    }

    .play-speed-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      /* Ensure relative positioning for proper alignment */
    }

    .play-speed-container select {
      margin-top: 5px;
      /* Space between play button and select dropdown */
      background-color: #1d1d1d;
      color: white;
      border: 1px solid #555;
      border-radius: 5px;
      outline: none;
      /* Remove focus outline for aesthetics */
      cursor: pointer;
      /* Indicate this is an interactive element */
    }

    .play-speed-container select option {
      background: #333;
      /* Ensure options are styled similarly */
      color: white;
    }
  </style>
</body>

</html>